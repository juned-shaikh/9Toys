<!-- update quantity view changes by aman verma sd 14/08/2020 -->
<div
  *ngIf="!loader"
  class="row justify-content-center"
  style="margin-top: 10%;"
> 
  <div class="col-md-4 text-center"> 
    <img src="assets/img/loader.gif" height="200" width="200" />
  </div>
</div>

<section style="margin-top:0px">
  <div class="filter-part">
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-2 col-md-4 mt-1">
          <!-- for category view hide show start -->
          <!-- <div class="col-md-2"> -->
                
            <div class="card project-discription">
              <div class="card-header">Filter</div>
              <div class="card-body p-1">
                <div class="card border-0 b-3" *ngIf="categoryNav">
                  <div class="card-header p-2 bg-white" data-toggle="collapse" data-target="#collapseExample1" aria-expanded="false">
                    <p class="m-0 h6 project-heading">Categories ({{categories?.length}})</p>
                  </div>
                  <div class="card-body p-0 collapse show" id="collapseExample1">
                    <ul class="list-group list-group-flush" style="height:200px;overflow:auto;">
                      <li class="list-group-item p-2 d-flex justify-content-between align-items-center" *ngFor="let category of categories; let index = index"  (click)="
                      navigateCategory(category.name, category.category_no)
                    ">
                        <div class=" " >
                          <label class="custom-control-label" >  {{
                            category.name.length > 22
                              ? (category.name | slice: 0:22) + "..."
                              : category.name
                          }}</label>
                        </div>
                        <!-- <span class="badge badge-secondary badge-pill">14</span> -->
                      </li>
                   
                    
                    </ul>
                  </div>
                </div>
  
                <div class="card border-0 b-3" *ngIf="brandNav">
                  <div class="card-header p-2 bg-white" data-toggle="collapse" data-target="#collapseExample1" aria-expanded="false">
                    <p class="m-0 h6 project-heading ">Brand ({{categories.length}})</p>
                  </div>
                  <div class="card-body p-0 collapse show" id="collapseExample1">
                    <ul class="list-group list-group-flush" style="height:200px;overflow:auto;">
                      <li class="list-group-item p-2 d-flex justify-content-between align-items-center" *ngFor="let categoryi of categories | slice:0:9;">
                        <div class="" (click)="navigateBrand(categoryi.name, categoryi.brand_id)">
                          <label class="custom-control-label" style="cursor: pointer;">   {{ (categoryi.name.length>20)? (categoryi.name | slice:0:20)+'...':(categoryi.name) }}</label>
                        </div>
                        <!-- <span class="badge badge-secondary badge-pill">14</span> -->
                      </li>
                   
                    
                    </ul>
                  </div>
                </div>
               
                <div class="card border-0 b-3">
                  <div class="card-header p-2 bg-white" data-toggle="collapse" data-target="#collapseExample3" aria-expanded="false">
                    <p class="m-0 h6">Color</p>
                  </div>
                  <div class="card-body p-0 collapse show" id="collapseExample3">
                    <ul class="list-group list-group-flush" style="height:200px;overflow:auto;">
                      <li class="list-group-item p-2 d-flex justify-content-between align-items-center">
                        <div class="custom-control custom-checkbox w-100">
                          <input type="checkbox" class="custom-control-input" id="customCheck1">
                          <label class="custom-control-label" for="customCheck1">
                            <div class="float-left p-2 mt-1 mr-1" style="background-color:#E52B50"></div>
                            <span>Amaranth</span>
                          </label>
                        </div>
                      </li>
                      <li class="list-group-item p-2 d-flex justify-content-between align-items-center">
                        <div class="custom-control custom-checkbox w-100">
                          <input type="checkbox" class="custom-control-input" id="customCheck1">
                          <label class="custom-control-label" for="customCheck1">
                            <div class="float-left p-2 mt-1 mr-1" style="background-color:#FFBF00"></div>
                            <span>Amber</span>
                          </label>
                        </div>
                      </li>
                      <li class="list-group-item p-2 d-flex justify-content-between align-items-center">
                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="customCheck1">
                          <label class="custom-control-label" for="customCheck1">
                            <div class="float-left p-2 mt-1 mr-1" style="background-color:#007FFF"></div>
                            <span>Azure</span>
                          </label>
                        </div>
                      </li>
                      <li class="list-group-item p-2 d-flex justify-content-between align-items-center">
                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="customCheck1">
                          <label class="custom-control-label" for="customCheck1">
                            <div class="float-left p-2 mt-1 mr-1" style="background-color:#007BA7"></div>
                            <span>Cerulean</span>
                          </label>
                        </div>
                      </li>
                      <li class="list-group-item p-2 d-flex justify-content-between align-items-center">
                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="customCheck1">
                          <label class="custom-control-label" for="customCheck1">
                            <div class="float-left p-2 mt-1 mr-1" style="background-color:#B87333"></div>
                            <span>Copper</span>
                          </label>
                        </div>
                      </li>
                      <li class="list-group-item p-2 d-flex justify-content-between align-items-center">
                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="customCheck1">
                          <label class="custom-control-label" for="customCheck1">
                            <div class="float-left p-2 mt-1 mr-1" style="background-color:#DC143C"></div>
                            <span>Crimson</span>
                          </label>
                        </div>
                      </li>
                      <li class="list-group-item p-2 d-flex justify-content-between align-items-center">
                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="customCheck1">
                          <label class="custom-control-label" for="customCheck1">
                            <div class="float-left p-2 mt-1 mr-1" style="background-color:#008000"></div>
                            <span>Green</span>
                          </label>
                        </div>
                      </li>
                      <li class="list-group-item p-2 d-flex justify-content-between align-items-center">
                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="customCheck1">
                          <label class="custom-control-label" for="customCheck1">
                            <div class="float-left p-2 mt-1 mr-1" style="background-color:#808080"></div>
                            <span>Gray</span>
                          </label>
                        </div>
                      </li>
                      <li class="list-group-item p-2 d-flex justify-content-between align-items-center">
                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="customCheck1">
                          <label class="custom-control-label" for="customCheck1">
                            <div class="float-left p-2 mt-1 mr-1" style="background-color:#FFD700"></div>
                            <span>Gold</span>
                          </label>
                        </div>
                      </li>
                      <li class="list-group-item p-2 d-flex justify-content-between align-items-center">
                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="customCheck1">
                          <label class="custom-control-label" for="customCheck1">
                            <div class="float-left p-2 mt-1 mr-1" style="background-color:#D1E231"></div>
                            <span>Pear</span>
                          </label>
                        </div>
                      </li>
                      <li class="list-group-item p-2 d-flex justify-content-between align-items-center">
                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="customCheck1">
                          <label class="custom-control-label" for="customCheck1">
                            <div class="float-left p-2 mt-1 mr-1" style="background-color:#800080"></div>
                            <span>Purple</span>
                          </label>
                        </div>
                      </li>
                      <li class="list-group-item p-2 d-flex justify-content-between align-items-center">
                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="customCheck1">
                          <label class="custom-control-label" for="customCheck1">
                            <div class="float-left p-2 mt-1 mr-1" style="background-color:#C0C0C0"></div>
                            <span>Silver</span>
                          </label>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
                <!-- <div class="card border-0 b-3">
                  <div class="card-header p-2 bg-white" data-toggle="collapse" data-target="#collapseExample4" aria-expanded="false">
                    <p class="m-0 h6">Price</p>
                  </div>
                  <div class="card-body p collapse show" id="collapseExample4">
                    <div class="form-row">
                      <div class="form-group col-md-6">
                        <label>Min</label>
                        <input class="form-control" placeholder="$0" type="number">
                      </div>
                      <div class="form-group text-right col-md-6">
                        <label>Max</label>
                        <input class="form-control" placeholder="$1,0000" type="number">
                      </div>
                    </div>
                  </div>
                </div> -->
              <!-- </div> -->
              <div class="card-footer">
                <button type="button" class="btn btn-block btn-primary">Filter</button>
              </div>
            <!-- </div> -->
          </div>
              <div class="bs-example d-none d-md-block d-lg-block">
                  <div class="accordion" id="accordionExample">
                    <div class="card mb-1 shadow-sm">
                      <div class="card-header" id="headingTwo">
                          <button
                            type="button"
                            class="btn btn-link collapsed"
                            data-toggle="collapse"
                            data-target="#collapseTwo"
                          >
                              Sort by
                          </button>
                        
                      </div>
                      <div
                        id="collapseTwo"
                        aria-labelledby="headingTwo"
                        data-parent="#accordionExample"
                      >
                        <div class="card-body">
                          <mat-radio-group aria-label="Modes">
                            <div class="">
                              <label class="by-font-size">
                                <mat-radio-button
                                  (click)="setSorting('new')"
                                  value="1" color="primary"
                                  >  New
                                </mat-radio-button>
                              </label>
                            </div>
                            <div class="">
                              <label class="by-font-size">
                                <mat-radio-button
                                  (click)="setSorting('high-to-low')"
                                  value="2"
                                  color="primary"
                                >
                                   Price High to Low
                                </mat-radio-button>
                              </label>
                            </div>
                            <div class="">
                              <label class="by-font-size">
                                <mat-radio-button
                                  (click)="setSorting('low-to-high')"
                                  value="3"
                                  color="primary"
                                >
                                  Price Low to high
                                </mat-radio-button>
                              </label>
                            </div>
                          </mat-radio-group>
                       
                        </div>
                      </div>
                    </div>
               
                  </div>
                </div>

          </div>
            
          
          
        </div>

       

        <div class="col-lg-10 col-md-8">

        
          <div class="row border-bottom" *ngIf="subcat">
            <div class="breadcrumbs">
                <div class="row">
                  <ul>
                    <li>
                        <a style="cursor : pointer" (click)="navigateCategory(subcategory.name, subcategory.category_no)" class="font-wieght-500">{{ subcategory.name }}</a>
                        
                    </li>
                    <li  *ngFor="let sub of subcategory.sub_category" class="category-click cursor-pointer">
                        / 
                      <a  (click)="navigateCategory(sub.name, sub.category_no) "  >{{ sub.name }}</a>
                      
                    </li>
                  
                    
                  </ul>
                </div>
              </div>

          </div>


  <!-- start empty category -->
  <div *ngIf="!products">
    <div class=" d-none d-lg-block d-md-none">
      <div class="text-center shadow mt-4 ml-3 mr-3">
        <mat-card-content>
          <img src="assets/img/no-product-found.jpg" class="img-responsive"  />
        </mat-card-content>
      </div>
    </div>

    <div class=" d-block d-lg-none d-md-block">
      <div class="text-center shadow-sm mt-4 ml-3 mr-3">
        <mat-card-content class="p-4">
         <h3>SORRY <span><i class="fas fa-exclamation text-primary"></i></span></h3>
         <h6><span class="text-primary">No Product</span> Found.</h6>
        </mat-card-content>
      </div>
    </div>


  </div>
  <!-- end empty category -->



          <!-- for mobile -->
          <section class="d-block d-lg-none d-md-none d-xl-none  w-100">

            <div class="container-fluid mt-3 mb-5">
              <div class="row">
                <div class="col-6  mobile-product-box-height mt-1 "      (click)="
                view_product(
                  nprd.product.meta_title,
                  nprd.product.product_no,nprd.product.slug,nprd.product.quick_product_check
                )
              " *ngFor="let nprd of products">
                  <div class="row">
                    <div class="col-md-12 mobile-image-box-height">
                     <img     src="{{ nprd.product_image.medium_thumbnail_link }}" class="mobile-view-image">
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-12 mobile-product-heading">
                     <h6 >
                       <a style="font-weight: 600;font-family: sans-serif;font-size: 1.5rem;" class="text-titlecase" title="{{nprd.name}}"> {{ (nprd.product.name.length>35)? (nprd.product.name | slice:0:35)+'...':(nprd.product.name)  | titlecase}}</a>
                     </h6>
                   
                    </div>
                  </div>
            
                  <div class="row text-muted mobile-seller-price">
                   <div class="col-md-12 ">
            
            
                     <span *ngIf="nprd.product_rate[0].is_rent == '1'" class="mobile-product-price"
                     >{{ nprd.product_rate[0].name }} @
                     {{ nprd.product_rate[0].rate }}
                   </span>
                   <span *ngIf="nprd.product_rate[0].is_rent != '2'" class="mobile-product-price "
                     >
                     ₹ {{ nprd.product_rate[0].rate }}
                   </span>
                   
                   <span
                   class=" text-muted mobile-product-price"
                   *ngIf="nprd.product_rate[0].rate < nprd.product.mrp"
                   ><del
                     >₹ {{ nprd.product.mrp  }}
                   </del></span
                 >
                 <span
                   *ngIf="nprd.product_rate[0].is_rent == '2'"
                   class="mobile-product-price"
                   >{{ nprd.product_rate[1].name }} @
                   {{ nprd.product_rate[1].rate }} </span
                 ><br />
                 <span
                   *ngIf="nprd.product_rate[0].rate < nprd.product.mrp"
                   class="font-wieght-bold text-center for-you text-success"
                   >Discount :
                   {{
                     nprd.product_rate[0].discount_percent | number:'1.0-0'
                   }}%</span
                 >
                   </div>
                 </div>
                 
                </div>
              </div>
            </div>
            
            </section>
          <div class="row ">
            <div *ngFor="let nprd of products" class="col-md-6 col-lg-3 col-sm-6 d-none d-md-block d-lg-block">
              <!-- <div class="row"> -->
              <div>
                <div class=" mt-2" style="height: 390px;">
                  <div
                    class="hovereffect cursor-pointer"
                  >
                  <h1  class="show-status" *ngIf="nprd.product.txn_quantity< '1'"><span> Out of stock </span></h1>  
                    <div class="row button-for-cart justify-content-end mt-1">
                      <!--  <div *ngIf="nprd.product.txn_quantity <'1'" class="col-md-12 text-right">
                       </div> -->
                      <div  class="col-md-12 text-right">
                        <div  *ngIf="nprd.product.wishlist_check == false"
                        class="icon-links text-warning"
                        style="cursor: pointer;"
                        matTooltip="Add to Wishlist"
                        (click)="addToWishlist(nprd)"
                      >
                        <i class="far fa-heart text-secondary"></i>
                      </div>
                      <div  *ngIf="nprd.product.wishlist_check == true"  (click)="deleteFromWishlist(nprd.product.wishlist_num)"
                      class="icon-linkwishlist"
                      style="cursor: pointer;"
                      matTooltip="Already exist in Wishlist"
                    >
                      <i class="fas fa-heart"></i> 
                    </div>


                    <!-- without login -->
                      <div  *ngIf="userC == false"
                        class="icon-links text-warning"
                        style="cursor: pointer;"
                        matTooltip="Add to Wishlist"
                        (click)="addToWishlistWL(nprd)"
                      >
                        <i class="far fa-heart text-secondary"></i>
                      </div>
                    <!-- without login -->
                      </div>

                      <div *ngIf="userC==false && nprd.product.txn_quantity > '0'" class="col-md-12 text-right">
                        <div
                        class="icon-links text-primary"
                        (click)="addToCart(nprd)"
                        style="cursor: pointer;"
                        matTooltip="Add to Cart"
                      >
                        <i class="fas fa-shopping-bag text-secondary"></i>
                      </div>
                      </div>
                      <div *ngIf="userC==true && nprd.product.txn_quantity> '0'" class="col-md-12 text-right ">
                        <div *ngIf="nprd.product.cart_check == false"
                        class="icon-links text-primary"
                        (click)="addToCart(nprd)"
                        style="cursor: pointer;"
                        matTooltip="Add to Cart"
                      >
                        <i class="fas fa-shopping-bag text-secondary"> </i>
                      </div>
                      
                        <!-- start for update 14/08/2020 Priyangee -->
                      

                      <!-- end Priyangee 14/08/2020 -->
                      </div>
                     
                    </div>
                   <picture class=" cursor-pointer" style="width : 100% ;height : 285px!important;  "  (click)="
                   view_product(
                     nprd.product.meta_title,
                     nprd.product.product_no,nprd.product.slug,nprd.product.quick_product_check
                   )
                 ">
                      <img
                      class="card-img-top Recent-img p-2  "
                      src="{{ nprd.product_image.medium_thumbnail_link }}"
                      onerror="this.src='assets/img/favicon1.png';"
                      alt="Product Image"
                      
                    />
                   </picture>
                    

                    <div
                      class="publication-content "
                    >
                
                     
                      <div class=""  (click)="
                      view_product(
                        nprd.product.meta_title,
                        nprd.product.product_no,nprd.product.slug,nprd.product.quick_product_check
                      )
                    ">
                        <h6 class="text-titlecase text-left font-weight-600" style="font-size: 1.0rem; font-weight: 600;font-family: sans-serif;" title="{{ nprd.product.name }} "> 
                          {{ (nprd.product.name.length>80)? (nprd.product.name | slice:0:80)+'...':(nprd.product.name) }} </h6>
                      </div>
                      <p class="text-left">
                      <span
                        *ngIf="nprd.product_rate[0].is_rent == '1'"
                        class="for-you"
                        >{{ nprd.product_rate[0].name }} @
                        {{ nprd.product_rate[0].rate }}
                      </span>
                      <span
                        *ngIf="nprd.product_rate[0].is_rent != '2'"
                        class="for-you"
                        >
                        ₹ {{ nprd.product_rate[0].rate }}
                      </span>
                      <span
                        class="for-you font-wieght-500"
                        *ngIf="nprd.product_rate[0].rate < nprd.product.mrp"
                        ><del
                          > ₹ {{ nprd.product.mrp  }}
                        </del></span
                      >
                      <span
                        *ngIf="nprd.product_rate[0].is_rent == '2'"
                        class="for-you"
                        >{{ nprd.product_rate[1].name }} @
                        {{ nprd.product_rate[1].rate }} </span
                        >&nbsp;
                        <span
                    *ngIf="nprd.product_rate[0].rate < nprd.product.mrp" 
                    class="font-wieght-bold  for-you text-success"
                    >
                    {{
                      nprd.product_rate[0].discount_percent | number:'1.0-0'
                    }}% off</span
                  >
                </p>

                
                  <div class="d-flex justify-content-end Quantity-box"  *ngIf="nprd.product.cart_check == true">

               <!-- <div > -->
                        <button *ngIf="nprd.product.cart.qty > 1 || nprd.product.cart.qty > '1'" class="button-minus btn-info btn-sm "
                          title="decrease"
                          (click)="updateCart3minus(nprd.product.cart.cart_id,nprd.product.cart.cart_inventory_id,nprd.product.cart.rate_type,nprd.product.cart.qty,nprd.product.txn_quantity);">-
                        </button>
&nbsp;
                        <button *ngIf="nprd.product.cart.qty == 1 || nprd.product.cart.qty == '1'" class="button-minus  btn btn-info btn-sm ml-1" (click)="deleteFromCartF(nprd.product.cart.cart_inventory_id)"
                          title="remove" >-
                        </button>
&nbsp;
                        <input class="_2zH4zg form-control text-center" type="number" matInput style="width: 54px; height: 27px;"
                        [style.font-size.px]="(nprd.product.cart.qty.length <=2)?12:(16-(nprd.product.cart.qty.length+2))"  [style.width.px]="(nprd.product.cart.qty.length <=2)?40:(40+(nprd.product.cart.qty.length*3))"  
                          placeholder="Quantity" value="{{nprd.product.cart.qty}}" required min="1"
                          (change)="updateCart3(nprd.product.cart.cart_id,nprd.product.cart.cart_inventory_id,nprd.product.cart.rate_type,$event.target.value,nprd.product.txn_quantity)"
                          (keyup)="updateCart3(nprd.product.cart.cart_id,nprd.product.cart.cart_inventory_id,nprd.product.cart.rate_type,$event.target.value,nprd.product.txn_quantity)">
                        <button *ngIf="nprd.product.cart.qty2<nprd.product.txn_quantity2" class="btn btn-info button-minus btn-sm ml-1 wNrY5O text-center" title="increase"
                          (click)="updateCart3plus(nprd.product.cart.cart_id,nprd.product.cart.cart_inventory_id,nprd.product.cart.rate_type,nprd.product.cart.qty,nprd.product.txn_quantity);">+
                        </button>
                         <!-- disable button for increase with stock start 13/08/2020 -->
              <button *ngIf="nprd.product.cart.qty2 >= nprd.product.txn_quantity2" class="btn button-minus btn-info btn-sm ml-1  text-center" title="limit reached" [disabled]=true
                >+
               
              </button>
            <!-- </div> -->
              <!-- disable button for increase with stock end 13/08/2020 -->

                    </div>
                     <!-- start for buy now -->
                  <div class="add-to-cart2 d-flex justify-content-end Quantity-box" *ngIf=" nprd.product.txn_quantity > '0' && quick_buy=='1'">
                    <a  matTooltip="Buy Now" (click)="rates(nprd)" *ngIf="(nprd.product.cart_check == false) && userC==true 
                    " class="default-btn buynow-button cursor-pointer"><span class="fa fa-bolt text-white" ></span>&nbsp; Buy Now</a>

                     <a  matTooltip="Buy Now" (click)="rates(nprd)" *ngIf="userC == false" class="default-btn buynow-button cursor-pointer"><span class="fa fa-bolt text-white" ></span>&nbsp; Buy Now</a>
                  </div>
<!-- end for buy now -->
                
              
                    </div>

                  
                  </div>
                </div>
              </div>
            </div>
           
          </div>

        

                    <div class=" pt-4 d-block d-md-none d-lg-none fixed-bottom" >
                      <!-- <mat-card> -->
             
                        <mat-accordion style="border:none;">
                          <mat-expansion-panel [hideToggle]=true >
                            <mat-expansion-panel-header>
                              <mat-panel-title class="justify-content-around ">
                              <span>sort by</span>    <mat-icon class="">swap_vertical_circle</mat-icon> 
                              </mat-panel-title>
                            </mat-expansion-panel-header>
                            <div class="example-button-row pl-2">


                              <mat-radio-button
                              (click)="setSorting('new')"
                              value="1"
                              color="primary"
                            >
                              Price New
                            </mat-radio-button>

                             
                            </div>
                            <div class="example-button-row pl-2">

                              <mat-radio-button
                              (click)="setSorting('high-to-low')"
                              value="2"
                              color="primary"
                            >
                              Price High to Low
                            </mat-radio-button>
                            
                            </div>
                            <div class="example-button-row pl-2">
                              <mat-radio-button
                              (click)="setSorting('low-to-high')"
                              value="3"
                              color="primary"
                            >
                              Price Low to high
                            </mat-radio-button>

                              
                            </div>
                          </mat-expansion-panel>
                        </mat-accordion>
                        <!-- </mat-card> -->
                    </div>


        </div>
      </div>
    </div>
  </div>
</section>


